



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Guice integration for OrientDB">
      
      
        <link rel="canonical" href="https://xvik.github.io/guice-persist-orient/3.3.2/repository/overview/">
      
      
        <meta name="author" content="Vyacheslav Rusakov">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Overview - Guice-persist-orient</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#repositories" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://xvik.github.io/guice-persist-orient/3.3.2" title="Guice-persist-orient" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Guice-persist-orient
              </span>
              <span class="md-header-nav__topic">
                Overview
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="http://github.com/xvik/guice-persist-orient/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      guice-persist-orient
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://xvik.github.io/guice-persist-orient/3.3.2" title="Guice-persist-orient" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Guice-persist-orient
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="http://github.com/xvik/guice-persist-orient/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      guice-persist-orient
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      User guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        User guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/connections/" title="Connections" class="md-nav__link">
      Connections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/transactions/" title="Transactions" class="md-nav__link">
      Transactions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/cache/" title="Cache" class="md-nav__link">
      Cache
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Object scheme mapping
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Object scheme mapping
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/objectscheme/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/writing/" title="Writing custom annotations" class="md-nav__link">
      Writing custom annotations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      Class
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        Class
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/class/compositeindex/" title="@CompositeIndex" class="md-nav__link">
      @CompositeIndex
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/class/compositeluceneindex/" title="@CompositeLuceneIndex" class="md-nav__link">
      @CompositeLuceneIndex
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/class/dropindexes/" title="@DropIndexes" class="md-nav__link">
      @DropIndexes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/class/edge/" title="@EdgeType" class="md-nav__link">
      @EdgeType
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/class/rename/" title="@RenameFrom" class="md-nav__link">
      @RenameFrom
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/class/recreate/" title="@Recreate" class="md-nav__link">
      @Recreate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/class/vertex/" title="@VertexType" class="md-nav__link">
      @VertexType
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      Property
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        Property
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/property/caseinsensitive/" title="@CaseInsensitive" class="md-nav__link">
      @CaseInsensitive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/property/fulltextindex/" title="@FulltextIndex" class="md-nav__link">
      @FulltextIndex
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/property/" title="@Index" class="md-nav__link">
      @Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/property/mandatory/" title="@Mandatory" class="md-nav__link">
      @Mandatory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/property/luceneindex/" title="@LuceneIndex" class="md-nav__link">
      @LuceneIndex
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/property/notnull/" title="@ONotNull" class="md-nav__link">
      @ONotNull
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/property/readonly/" title="@Readonly" class="md-nav__link">
      @Readonly
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mapping/property/renameproperty/" title="@RenameFromProperty" class="md-nav__link">
      @RenameFromProperty
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Repository
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Repository
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Overview
      </label>
    
    <a href="./" title="Overview" class="md-nav__link md-nav__link--active">
      Overview
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" title="Setup" class="md-nav__link">
    Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guice-abstract-types-support" title="Guice abstract types support" class="md-nav__link">
    Guice abstract types support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#repositories-overview" title="Repositories overview" class="md-nav__link">
    Repositories overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-repository" title="Defining repository" class="md-nav__link">
    Defining repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-examples" title="Usage examples" class="md-nav__link">
    Usage examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#return-types" title="Return types" class="md-nav__link">
    Return types
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#projection" title="Projection" class="md-nav__link">
    Projection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-type-definition" title="Result type definition" class="md-nav__link">
    Result type definition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-conversion" title="Result conversion" class="md-nav__link">
    Result conversion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mixins" title="Mixins" class="md-nav__link">
    Mixins
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#command-mixins" title="Command mixins" class="md-nav__link">
    Command mixins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delegate-mixins" title="Delegate mixins" class="md-nav__link">
    Delegate mixins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bundled-crud-mixins" title="Bundled crud mixins" class="md-nav__link">
    Bundled crud mixins
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation" title="Validation" class="md-nav__link">
    Validation
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commandmethods/" title="Command methods" class="md-nav__link">
      Command methods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../delegatemethods/" title="Delegate methods" class="md-nav__link">
      Delegate methods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mixins/" title="Mixins" class="md-nav__link">
      Mixins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../result/" title="Result conversion" class="md-nav__link">
      Result conversion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../internals/" title="Implementation details" class="md-nav__link">
      Implementation details
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commandinternals/" title="Command implementation" class="md-nav__link">
      Command implementation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../delegateinternals/" title="Delegate implementation" class="md-nav__link">
      Delegate implementation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-9" type="checkbox" id="nav-6-9">
    
    <label class="md-nav__link" for="nav-6-9">
      Command
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-9">
        Command
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../command/asyncquery/" title="@AsyncQuery" class="md-nav__link">
      @AsyncQuery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/function/" title="@Function" class="md-nav__link">
      @Function
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/livequery/" title="@LiveQuery" class="md-nav__link">
      @LiveQuery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/query/" title="@Query" class="md-nav__link">
      @Query
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/script/" title="@Script" class="md-nav__link">
      @Script
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-9-6" type="checkbox" id="nav-6-9-6">
    
    <label class="md-nav__link" for="nav-6-9-6">
      Params
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-9-6">
        Params
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../command/param/dynamic/" title="@DynamicParams" class="md-nav__link">
      @DynamicParams
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/param/elvar/" title="@ElVar" class="md-nav__link">
      @ElVar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/param/fetchplan/" title="@FetchPlan" class="md-nav__link">
      @FetchPlan
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/param/listen/" title="@Listen" class="md-nav__link">
      @Listen
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/param/param/" title="@Param" class="md-nav__link">
      @Param
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/param/ridelvar/" title="@RidElVar" class="md-nav__link">
      @RidElVar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/param/pagination/" title="@Skip & @Limit" class="md-nav__link">
      @Skip & @Limit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/param/var/" title="@Var" class="md-nav__link">
      @Var
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-9-7" type="checkbox" id="nav-6-9-7">
    
    <label class="md-nav__link" for="nav-6-9-7">
      Amend
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-9-7">
        Amend
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../command/amend/timeout/" title="@Timeout" class="md-nav__link">
      @Timeout
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-10" type="checkbox" id="nav-6-10">
    
    <label class="md-nav__link" for="nav-6-10">
      Delegate
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-10">
        Delegate
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../delegate/delegate/" title="@Delegate" class="md-nav__link">
      @Delegate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-10-2" type="checkbox" id="nav-6-10-2">
    
    <label class="md-nav__link" for="nav-6-10-2">
      Params
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-10-2">
        Params
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../delegate/param/connection/" title="@Connection" class="md-nav__link">
      @Connection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../delegate/param/generic/" title="@Generic" class="md-nav__link">
      @Generic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../delegate/param/repository/" title="@Repository" class="md-nav__link">
      @Repository
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-11" type="checkbox" id="nav-6-11">
    
    <label class="md-nav__link" for="nav-6-11">
      Result
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-11">
        Result
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../result/noconvert/" title="@NoConversion" class="md-nav__link">
      @NoConversion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../result/detach/" title="@DetachResult" class="md-nav__link">
      @DetachResult
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-12" type="checkbox" id="nav-6-12">
    
    <label class="md-nav__link" for="nav-6-12">
      Mixin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-12">
        Mixin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../mixin/doccrud/" title="DocumentCrud" class="md-nav__link">
      DocumentCrud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mixin/objcrud/" title="ObjectCrud" class="md-nav__link">
      ObjectCrud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mixin/objvcrud/" title="ObjectVertexCrud" class="md-nav__link">
      ObjectVertexCrud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mixin/edges/" title="EdgesSupport" class="md-nav__link">
      EdgesSupport
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mixin/edgetype/" title="EdgeTypeSupport" class="md-nav__link">
      EdgeTypeSupport
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mixin/pagination/" title="Pagination" class="md-nav__link">
      Pagination
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/compatibility/" title="Compatibility" class="md-nav__link">
      Compatibility
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/history/" title="Release notes" class="md-nav__link">
      Release notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" title="Setup" class="md-nav__link">
    Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guice-abstract-types-support" title="Guice abstract types support" class="md-nav__link">
    Guice abstract types support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#repositories-overview" title="Repositories overview" class="md-nav__link">
    Repositories overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-repository" title="Defining repository" class="md-nav__link">
    Defining repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-examples" title="Usage examples" class="md-nav__link">
    Usage examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#return-types" title="Return types" class="md-nav__link">
    Return types
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#projection" title="Projection" class="md-nav__link">
    Projection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-type-definition" title="Result type definition" class="md-nav__link">
    Result type definition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-conversion" title="Result conversion" class="md-nav__link">
    Result conversion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mixins" title="Mixins" class="md-nav__link">
    Mixins
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#command-mixins" title="Command mixins" class="md-nav__link">
    Command mixins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delegate-mixins" title="Delegate mixins" class="md-nav__link">
    Delegate mixins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bundled-crud-mixins" title="Bundled crud mixins" class="md-nav__link">
    Bundled crud mixins
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation" title="Validation" class="md-nav__link">
    Validation
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="http://github.com/xvik/guice-persist-orient/edit/master/src/doc/docs/repository/overview.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="repositories">Repositories<a class="headerlink" href="#repositories" title="Permanent link">&para;</a></h1>
<p>Repository annotations simplify writing dao or repository objects.
Repositories are very close to spring-data repositories and following description will follow this approach.
But repository methods may be used in any way (like dao or as additional methods for beans).</p>
<p>Repositories mainly cover query definitions (removing all boilerplate code).
If you need something like spring-data specifications, you can use <a href="https://github.com/raymanrt/orientqb">orientqb</a></p>
<p>Example repository query method:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyRepository</span> <span class="o">{</span>

    <span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model where name=? and nick=?&quot;</span><span class="o">)</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">find</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">nick</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<p>Repositories implementation is based on extensions (every annotation you'll see is an extension).
Custom extensions supported, so you can change almost everything.</p>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<p>To use repository features register repository module in guice context:</p>
<div class="codehilite"><pre><span></span><span class="n">install</span><span class="o">(</span><span class="k">new</span> <span class="n">RepositoryModule</span><span class="o">());</span>
</pre></div>

<h2 id="guice-abstract-types-support">Guice abstract types support<a class="headerlink" href="#guice-abstract-types-support" title="Permanent link">&para;</a></h2>
<p>Repository methods defined with annotations, so interface and abstract methods are ideal candidates to use them.
Guice doesn't allow using abstract types, but it's possible with <a href="https://github.com/xvik/guice-ext-annotations">a bit of magic</a>.</p>
<p>Abstract types (abstract class or interface containing repository methods) could be registered directly in guice module:</p>
<div class="codehilite"><pre><span></span><span class="n">bind</span><span class="o">(</span><span class="n">MyInterfaceRepository</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="n">DynamicClassGenerator</span><span class="o">.</span><span class="na">generate</span><span class="o">(</span><span class="n">MyInterfaceRepository</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">in</span><span class="o">(</span><span class="n">Singleton</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>

<p>Or dynamic resolution could be used (guice JIT resolution):</p>
<div class="codehilite"><pre><span></span><span class="nd">@ProvidedBy</span><span class="o">(</span><span class="n">DynamicSingletonProvider</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyRepository</span>
</pre></div>

<p>When some bean require this dao as dependency, guice will call provider, which will generate proper class for guice.
(dynamic resolution completely replaces classpath scanning: only actually used repositories will be created)
Note, this will automatically make bean singleton, which should be desirable in most cases. If you need custom scope
use <code>DynamicClassProvider</code> with <code>@ScopeAnnotation</code> annotation (see details in <a href="https://github.com/xvik/guice-ext-annotations">guice-ext-annotations</a>)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Intellij IDEA will warn you that ProvidedBy annotation is incorrectly typed, but it's ok, because provider is too generic.
There is nothing I can do with it and it's the best (the simplest) way I know (without explicit classpath scanning, which is redundant).</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Guice will control instance creation, so guice AOP features will completely work!
<code>@Transactional</code> annotation may be used (generally not the best idea to limit transaction to repository method, but in some cases could be suitable).
You can think of repository interface or abstract class as of usual guice bean (no limitations).</p>
</div>
<p>Repository methods are applied using aop (that's why they could be used everywhere).</p>
<h2 id="repositories-overview">Repositories overview<a class="headerlink" href="#repositories-overview" title="Permanent link">&para;</a></h2>
<p>There 2 types of repository methods:</p>
<ul>
<li><a href="../commandmethods/">Commands</a> - orient data manipulation calls (queries, commands, scripts etc) and build around orient command objects</li>
<li><a href="../delegatemethods/">Delegates</a> - methods delegate execution to some other beans (useful for generic logic)  </li>
</ul>
<table>
<thead>
<tr>
<th>Method annotation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../command/query/">@Query</a></td>
<td>select/update/insert query</td>
</tr>
<tr>
<td><a href="../command/function/">@Function</a></td>
<td>orient function call</td>
</tr>
<tr>
<td><a href="../command/script/">@Script</a></td>
<td>script call (sql, js etc)</td>
</tr>
<tr>
<td><a href="../command/asyncquery/">@AsyncQuery</a></td>
<td>asynchronous query call</td>
</tr>
<tr>
<td><a href="../command/livequery/">@LiveQuery</a></td>
<td>orient live query subscription call</td>
</tr>
<tr>
<td><a href="../delegate/delegate/">@Delegate</a></td>
<td>delegate call to other bean method</td>
</tr>
</tbody>
</table>
<h2 id="defining-repository">Defining repository<a class="headerlink" href="#defining-repository" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><span class="nd">@Transactional</span>
<span class="nd">@ProvidedBy</span><span class="o">(</span><span class="n">DynamicSingletonProvider</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ModelRepository</span> <span class="o">{</span>

    <span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">();</span>

    <span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;update Model set name = ? where name = ?&quot;</span><span class="o">)</span>
    <span class="kt">int</span> <span class="nf">updateName</span><span class="o">(</span><span class="n">String</span> <span class="n">newName</span><span class="o">,</span> <span class="n">String</span> <span class="n">oldName</span><span class="o">);</span>

    <span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;insert into Model (name) values(:name)&quot;</span><span class="o">)</span>
    <span class="n">Model</span> <span class="nf">create</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Repository methods could be used to supplement existing bean, but suggest to use pure interface repositories.</p>
</div>
<div class="codehilite"><pre><span></span><span class="nd">@Transactional</span>
<span class="nd">@ProvidedBy</span><span class="o">(</span><span class="n">DynamicSingletonProvider</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">MyDao</span> <span class="o">{</span>

    <span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">();</span>

    <span class="c1">// normal method</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doSomething</span><span class="o">()</span> <span class="o">{</span>
        <span class="o">...</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>@Transactional</code> is not required (annotation usage depends on your service architecture, but repository method
must be used inside transaction).</p>
</div>
<h2 id="usage-examples">Usage examples<a class="headerlink" href="#usage-examples" title="Permanent link">&para;</a></h2>
<p><a href="http://orientdb.com/docs/last/Functions.html">Function</a> call:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Function</span><span class="o">(</span><span class="s">&quot;function1&quot;</span><span class="o">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">function</span><span class="o">();</span>
</pre></div>

<p>Positional parameters:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model where name=? and nick=?&quot;</span><span class="o">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">parametersPositional</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">nick</span><span class="o">)</span>
</pre></div>

<p>Named parameters:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span> <span class="s">&quot;select from Model where name=:name and nick=:nick&quot;</span><span class="o">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">parametersNamed</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">&quot;nick&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">nick</span><span class="o">)</span>
</pre></div>

<p><a href="http://orientdb.com/docs/last/Pagination.html">Pagination</a>:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model where name=? and nick=?&quot;</span><span class="o">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">parametersPaged</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">nick</span><span class="o">,</span> <span class="nd">@Skip</span> <span class="kt">int</span> <span class="n">skip</span><span class="o">,</span> <span class="nd">@Limit</span> <span class="kt">int</span> <span class="n">limit</span><span class="o">)</span>
</pre></div>

<p><a href="https://github.com/xvik/guice-persist-orient/wiki/Repository-command-methods#el-variables">El variable</a>:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model where ${prop}=?&quot;</span><span class="o">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">findBy</span><span class="o">(</span><span class="nd">@ElVar</span><span class="o">(</span><span class="s">&quot;prop&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">prop</span><span class="o">,</span> <span class="n">String</span> <span class="n">value</span><span class="o">)</span>
</pre></div>

<p><a href="http://orientdb.com/docs/last/Fetching-Strategies.html">Fetch plan</a> parameter:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">(</span><span class="nd">@FetchPlan</span><span class="o">(</span><span class="s">&quot;*:0&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">plan</span><span class="o">);</span>
</pre></div>

<p><a href="http://orientdb.com/docs/last/SQL-batch.html">Sql</a> script:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Script</span><span class="o">(</span><span class="s">&quot;begin&quot;</span> <span class="o">+</span>
  <span class="s">&quot;let account = create vertex Account set name = :name&quot;</span> <span class="o">+</span>
  <span class="s">&quot;let city = select from City where name = :city&quot;</span> <span class="o">+</span>
  <span class="s">&quot;let edge = create edge Lives from $account to $city&quot;</span> <span class="o">+</span>
  <span class="s">&quot;commit retry 100&quot;</span> <span class="o">+</span>
  <span class="s">&quot;return $edge&quot;</span><span class="o">)</span>
<span class="n">Edge</span> <span class="nf">linkCity</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">&quot;city&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">city</span><span class="o">)</span>
</pre></div>

<p><a href="http://orientdb.com/docs/last/Javascript-Command.html">Js</a> script:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Script</span><span class="o">(</span><span class="n">language</span> <span class="o">=</span> <span class="s">&quot;javascript&quot;</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span>
 <span class="s">&quot;for( i = 0; i &lt; 1000; i++ ){&quot;</span> <span class="o">+</span>
     <span class="s">&quot;db.command(&#39;insert into Model(name) values (\&quot;test&#39;+i+&#39;\&quot;)&#39;);&quot;</span> <span class="o">+</span>
 <span class="s">&quot;}&quot;</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">jsScript</span><span class="o">()</span>
</pre></div>

<p><a href="https://orientdb.com/docs/last/Document-API-Documents.html#asynchronous-queries">Async</a> query:</p>
<div class="codehilite"><pre><span></span><span class="nd">@AsyncQuery</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">select</span><span class="o">(</span><span class="nd">@Listen</span> <span class="n">OCommandResultListener</span> <span class="n">listener</span><span class="o">)</span>
</pre></div>

<p>Type safe listener (with conversion):</p>
<div class="codehilite"><pre><span></span><span class="nd">@AsyncQuery</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">select</span><span class="o">(</span><span class="nd">@Listen</span> <span class="n">AsyncQueryListener</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="n">listener</span><span class="o">)</span>
</pre></div>

<p>Or with projection:</p>
<div class="codehilite"><pre><span></span><span class="nd">@AsyncQuery</span><span class="o">(</span><span class="s">&quot;select name from Model&quot;</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">select</span><span class="o">(</span><span class="nd">@Listen</span> <span class="n">AsyncQueryListener</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">listener</span><span class="o">)</span>
</pre></div>

<p>Dynamic parameters:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="err">&#39;</span><span class="n">select</span> <span class="n">from</span> <span class="n">Model</span> <span class="n">where</span> <span class="n">$</span><span class="o">{</span><span class="n">cond</span><span class="o">}</span><span class="err">&#39;</span><span class="o">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">ODocument</span><span class="o">&gt;</span> <span class="nf">findWhere</span><span class="o">(</span><span class="nd">@ElVar</span><span class="o">(</span><span class="s">&quot;cond&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">cond</span><span class="o">,</span> <span class="nd">@DynamicParams</span> <span class="n">Object</span><span class="o">...</span> <span class="n">params</span><span class="o">);</span>
</pre></div>

<p>Non blocking (listener execute in different thread):</p>
<div class="codehilite"><pre><span></span><span class="nd">@AsyncQuery</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;select from Model&quot;</span><span class="o">,</span> <span class="n">blocking</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;&gt;</span> <span class="nf">select</span><span class="o">(</span><span class="nd">@Listen</span> <span class="n">AsyncQueryListener</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="n">listener</span><span class="o">)</span>
</pre></div>

<p><a href="https://github.com/xvik/guice-persist-orient/wiki/Repository-delegate-methods">Delegate</a> example:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SomeBean</span> <span class="o">{</span>
   <span class="kd">public</span> <span class="n">List</span> <span class="nf">getAll</span><span class="o">()</span> <span class="o">{</span>
      <span class="o">...</span>
   <span class="o">}</span>
<span class="o">}</span>

<span class="nd">@Delegate</span><span class="o">(</span><span class="n">SomeBean</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="n">List</span> <span class="nf">getAll</span><span class="o">();</span>
</pre></div>

<p><a href="http://orientdb.com/docs/last/Live-Query.html">Live</a> query:</p>
<div class="codehilite"><pre><span></span><span class="nd">@LiveQuery</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="kt">int</span> <span class="nf">subscribe</span><span class="o">(</span><span class="nd">@Listen</span> <span class="n">OLiveResultListener</span> <span class="n">listener</span><span class="o">)</span>
</pre></div>

<p>Type safe listener (with conversion): </p>
<div class="codehilite"><pre><span></span><span class="nd">@LiveQuery</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="kt">int</span> <span class="nf">subscribe</span><span class="o">(</span><span class="nd">@Listen</span> <span class="n">QueryResultListener</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="n">listener</span><span class="o">)</span>
</pre></div>

<p>Or vertex conversion:</p>
<div class="codehilite"><pre><span></span><span class="nd">@LiveQuery</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="kt">int</span> <span class="nf">subscribe</span><span class="o">(</span><span class="nd">@Listen</span> <span class="n">QueryResultListener</span><span class="o">&lt;</span><span class="n">Vertex</span><span class="o">&gt;</span> <span class="n">listener</span><span class="o">)</span>
</pre></div>

<p>Unsubscription (usual command call):</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;live unsubscribe ${token}&quot;</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">unsubscribe</span><span class="o">(</span><span class="nd">@ElVar</span><span class="o">(</span><span class="s">&quot;token&quot;</span><span class="o">)</span> <span class="kt">int</span> <span class="n">token</span><span class="o">)</span>
</pre></div>

<p>Read more about method usage in wiki:
* <a href="https://github.com/xvik/guice-persist-orient/wiki/Repository-command-methods">Command methods</a>
* <a href="https://github.com/xvik/guice-persist-orient/wiki/Repository-delegate-methods">Delegate methods</a></p>
<p>For more examples see <a href="https://github.com/xvik/guice-persist-orient-examples/tree/master/repository-examples">repository definition examples</a></p>
<p>Writing extensions:
* <a href="https://github.com/xvik/guice-persist-orient/wiki/Repository-command-methods-internals">Extending commands</a>
* <a href="https://github.com/xvik/guice-persist-orient/wiki/Repository-delegate-methods-internals">Extending delegates</a></p>
<h2 id="return-types">Return types<a class="headerlink" href="#return-types" title="Permanent link">&para;</a></h2>
<p>You can use <code>Iterable</code>, <code>Collection</code>, <code>List</code>, <code>Set</code>, any collection implementation, array, single element or <code>Iterator</code> as return type.
Conversion between types will be applied <a href="../result/">automatically</a>.</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">();</span>

<span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="n">Set</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">();</span>

<span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="n">Model</span><span class="o">[]</span> <span class="nf">selectAll</span><span class="o">();</span>

<span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">();</span>

<span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">();</span>
</pre></div>

<p>If you define single result, when query produce multiple results, first result would be automatically taken:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model limit 1&quot;</span><span class="o">)</span>
<span class="n">Model</span> <span class="nf">selectAll</span><span class="o">();</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Limit is not required, but preferred, as soon as you don't need other results</p>
</div>
<h3 id="projection">Projection<a class="headerlink" href="#projection" title="Permanent link">&para;</a></h3>
<p>In some cases simple value is preferred, for example:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="err">&quot;</span><span class="n">select</span> <span class="nf">count</span><span class="o">(</span><span class="nd">@rid</span><span class="o">)</span> <span class="n">from</span> <span class="n">Model</span><span class="o">)</span>
<span class="kt">int</span> <span class="nf">count</span><span class="o">();</span>
</pre></div>

<p>Orient returns <code>ODocument</code> from query with single field (count).
Default <a href="../result/">result converter</a> could recognize when document or vertex contain just one property and return only simple value.</p>
<p>Another case is when you select single field:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select name from Model&quot;</span><span class="o">)</span>
<span class="n">String</span><span class="o">[]</span> <span class="nf">selectNames</span><span class="o">()</span>
</pre></div>

<p>Read more about <a href="../result/#result-projection">projection</a></p>
<h3 id="result-type-definition">Result type definition<a class="headerlink" href="#result-type-definition" title="Permanent link">&para;</a></h3>
<p>It is very important to always define exact return type. Connection type defines type of result object:
document connection always return <code>ODocument</code>, object return mapped objects (but <code>ODocument</code> for field calls)
and graph - <code>Vertex</code> and <code>Edge</code>.</p>
<p>Result type is used internally to detect connection type for query.</p>
<p>For example, if you write:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="n">List</span> <span class="nf">selectAll</span><span class="o">();</span>
</pre></div>

<p>You will actually receive <code>List&lt;ODocument&gt;</code>, because without generic it's impossible to detect required return type
and document connection used for query.</p>
<p>For example, in this case graph connection would be selected:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Vertex</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">();</span>
</pre></div>

<h3 id="result-conversion">Result conversion<a class="headerlink" href="#result-conversion" title="Permanent link">&para;</a></h3>
<p>Every repository method result is converted with default converter (as described above).</p>
<p>You can use more specific result conversion extension, for example:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model&quot;</span><span class="o">)</span>
<span class="nd">@NoConversion</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">();</span>
</pre></div>

<p>NoConversion disables conversion mechanism and you receive result object as is.</p>
<p>Read more about <a href="../result/">converter mechanism and writing custom converters</a>.</p>
<h2 id="mixins">Mixins<a class="headerlink" href="#mixins" title="Permanent link">&para;</a></h2>
<p>Java support multiple inheritance for interfaces and you can inherit multiple interfaces in classes.
So interfaces are ideal for writing small reusable parts (mixins).</p>
<h3 id="command-mixins">Command mixins<a class="headerlink" href="#command-mixins" title="Permanent link">&para;</a></h3>
<p>El variables in commands support references to class generics, so you can use it for generic repository logic:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyMixin</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from ${T}&quot;</span><span class="o">)</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">()</span>
<span class="o">}</span>

<span class="nd">@Transactional</span>
<span class="nd">@ProvidedBy</span><span class="o">(</span><span class="n">DynamicSingletonProvider</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ModelRepository</span> <span class="kd">extends</span> <span class="n">MyMixin</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="o">{}</span>
</pre></div>

<p>When you call mixin method from repository instance</p>
<div class="codehilite"><pre><span></span><span class="n">repository</span><span class="o">.</span><span class="na">selectAll</span><span class="o">()</span>
</pre></div>

<p>Generic value Model will be used for command <code>select from Model</code> and return type will be resolved as <code>List&lt;Model&gt;</code>,
which will allow to select proper connection (object if Model is mapped entity).</p>
<p>You may use as many generics as you need. Any repository hierarchy depth will be correctly resolved, so
you can even use composition mixins, which wil simply combine commonly used mixins:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">RepositoryBase</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">Mixin1</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;,</span> <span class="n">Mixin2</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{}</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You don't need to set <code>@ProvidedBy</code> annotation on mixins, because it's just interfaces and they are not used as repository instances.</p>
</div>
<h3 id="delegate-mixins">Delegate mixins<a class="headerlink" href="#delegate-mixins" title="Permanent link">&para;</a></h3>
<p>Delegates are also support generalization through extensions:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DelegateBean</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">List</span> <span class="nf">selectAll</span><span class="o">(</span><span class="nd">@Generic</span><span class="o">(</span><span class="s">&quot;T&quot;</span><span class="o">)</span> <span class="n">Class</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyMixin</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Delegate</span><span class="o">(</span><span class="n">DelegateBean</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">selectAll</span><span class="o">()</span>
<span class="o">}</span>
</pre></div>

<p>When delegate bean called from mixin, it will receive generic value (of calling mixin) as parameter.</p>
<p>Read more about <a href="../mixins/">mixins usage</a></p>
<h3 id="bundled-crud-mixins">Bundled crud mixins<a class="headerlink" href="#bundled-crud-mixins" title="Permanent link">&para;</a></h3>
<p>Crud mixins are the most common thing: commonly these methods are implemented in <code>AbstractDao</code> or something like this.</p>
<p><a href="../mixin/doccrud/">DocumentCrud</a> mixin provides base crud methods for document repository.</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyEntityDao</span> <span class="kd">extends</span> <span class="n">DocumentCrud</span><span class="o">&lt;</span><span class="n">MyEntity</span><span class="o">&gt;</span> <span class="o">{}</span>
</pre></div>

<p>Set mixin generic value only if you have reference entity class. Generic affects only <code>getAll</code> and <code>create</code> methods: if generic not set
you will not be able to use only this method.</p>
<p><a href="../mixin/objcrud/">ObjectCrud</a> mixin provides base crud methods for object repository:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyEntityRepository</span> <span class="kd">extends</span> <span class="n">ObjectCrud</span><span class="o">&lt;</span><span class="n">MyEntity</span><span class="o">&gt;</span> <span class="o">{}</span>
</pre></div>

<p>Now MyEntityRepository has all basic crud methods (create, get, delete etc).</p>
<p><a href="../mixin/pagination/">Pagination</a> provides simple pagination for your entity or document (but document should have reference type,
at least to specify schema type name (may be empty class))</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyEntityRepository</span> <span class="kd">extends</span> <span class="n">ObjectCrud</span><span class="o">&lt;</span><span class="n">MyEntity</span><span class="o">&gt;,</span> <span class="n">Pagination</span><span class="o">&lt;</span><span class="n">MyEntity</span><span class="o">,</span> <span class="n">MyEntity</span><span class="o">&gt;</span> <span class="o">{}</span>

<span class="o">...</span>
<span class="c1">// return page</span>
<span class="n">Page</span> <span class="n">page</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="na">getPage</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
</pre></div>

<p>In order to use pagination mixin, crud mixin is not required (used in example just to mention one more time that mixins could be combined).
Pagination mixin is the most complex one and good place to inspire how to <a href="https://github.com/xvik/guice-persist-orient/wiki/Repository-mixins#implementation">write more complex reusable logic</a>.</p>
<p><a href="../mixin/objvcrud/">ObjectVertexCrud</a>, 
<a href="../mixin/edges/">EdgesSupport</a> and
<a href="../mixin/edgetype/">EdgeTypeSupport</a> mixins allows using graph features from object api.</p>
<div class="codehilite"><pre><span></span><span class="nd">@vertexType</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Model</span> <span class="o">{}</span>

<span class="nd">@EdgeType</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ModelConnection</span> <span class="o">{}</span>

<span class="nd">@Transactional</span>
<span class="nd">@ProvidedBy</span><span class="o">(</span><span class="n">DynamicSingletonProvider</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ModelRepository</span> <span class="kd">extends</span> <span class="n">ObjectVertexCrud</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;,</span> 
                       <span class="n">EdgeTypeSupport</span><span class="o">&lt;</span><span class="n">ModelConnection</span><span class="o">,</span> <span class="n">Model</span><span class="o">,</span> <span class="n">Model</span><span class="o">&gt;</span> <span class="o">{}</span>

<span class="nd">@Inject</span> <span class="n">ModelRepository</span> <span class="n">repository</span><span class="o">;</span>
<span class="o">...</span>
<span class="n">Model</span> <span class="n">from</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="k">new</span> <span class="n">Model</span><span class="o">(..));</span>
<span class="n">Model</span> <span class="n">to</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="k">new</span> <span class="n">Model</span><span class="o">(..));</span>
<span class="n">ModelConnection</span> <span class="n">edge</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="na">createEdge</span><span class="o">(</span><span class="n">from</span><span class="o">,</span> <span class="n">to</span><span class="o">);</span>
</pre></div>

<h2 id="validation">Validation<a class="headerlink" href="#validation" title="Permanent link">&para;</a></h2>
<p>You can use <a href="https://github.com/xvik/guice-validator">guice-validator</a> to apply runtime validation (jsr 303) for repository methods:</p>
<div class="codehilite"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;select from Model where name = ?&quot;</span><span class="o">)</span>
<span class="nd">@Size</span><span class="o">(</span><span class="n">min</span> <span class="o">=</span> <span class="mi">1</span><span class="o">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span> <span class="nf">select</span><span class="o">(</span><span class="nd">@NotNull</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span>
</pre></div>

<p>Now this query throw ConstraintViolationException if null provided as parameter or no results returned.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Register validator module before guice-persist-orient modules!
This way validation will be checked before @Transactional or repository methods logic.</p>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../mapping/property/renameproperty/" title="@RenameFromProperty" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                @RenameFromProperty
              </span>
            </div>
          </a>
        
        
          <a href="../commandmethods/" title="Command methods" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Command methods
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2014-2018 Vyacheslav Rusakov
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/xvik" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/vyarus" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>